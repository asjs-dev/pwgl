(()=>{let enumCheck=(c,b)=>(c&b)===b;let noop=()=>{};let FPS=(()=>{let d={fps:0,delay:0};let h=16.6667;let f=0,j=0,k=0,c=Date.now();d.update=()=>{let b=Date.now();f++;d.delay=(b-c)/h;c=b;if(b>=k){d.fps=(f*1e3)/(b-j);j=b;k=b+1e3;f=0}};d.init=d.start=noop;return d})();let getFPS=async()=>new Promise((g)=>{requestAnimationFrame((c)=>requestAnimationFrame((b)=>g(Math.round(1e3/(b-c)))))});let enterFrame=(k,l=0)=>{let f={};let p,h,g,n,c=Date.now(),s,m=0;let q=()=>{FPS.update();k(FPS.fps,FPS.delay)};let r=()=>{let b=Date.now();let d=b-c;if(d>=n){n=2*g-d;c=b;q()}};let j=()=>{if(m){p();s=requestAnimationFrame(j)}};f.isPlaying=()=>m;f.clearMaxFPS=()=>{h=1/0;p=q};f.getMaxFPS=()=>h;f.setMaxFPS=(l)=>{if(!l||l<=0)return f.clearMaxFPS();h=l;n=g=Math.floor(1e3/h)-1;p=r};f.start=()=>{if(!m){m=1;j()}};f.stop=()=>{cancelAnimationFrame(s);m=0};f.setMaxFPS(l);f.start();return f};let SHOW_CALL_STACK=1;let SHOW_READABLE_NAMES=2;let SHOW_ARRAYS=4;let _1H=(p)=>p;let _1E=(l,q)=>function(...h){return l.apply(q,h)};let _1J=()=>"\n"+(new Error).stack.split("\n").slice(3).map((v)=>v.trim().slice(3)).join("\n")+"\n->";let _1r=(x)=>{let B=[];let m=new Map;let C=PWGL?Object.entries(PWGL.Const).reduce((c,d)=>{c[d[1]]=d[0];return c},{}):{};let s=()=>{if(w===2){b.stop();G=_1E};w++};let D=(y=0)=>{let K=enumCheck(y,SHOW_CALL_STACK);let L=enumCheck(y,SHOW_ARRAYS)?_1H:(p)=>p.map((v)=>v&&(Array.isArray(v)||v.constructor.name.endsWith("Array"))?`[${v.constructor.name}(${v.length})]`:v);let z=enumCheck(y,SHOW_READABLE_NAMES)?(p)=>p.map((v)=>C[v]??v):_1H;let t=[];m.forEach((l,f)=>t.push(l.map((j)=>z(L(j.slice(K?0:1))).join(" ")).join("\n")));return t};let M=(l,q,k,h)=>function(...h){if(k==="useProgram"){let A=h[0];if(!B.includes(A)){B.push(A);m.set(A,[]);N=A;O=Date.now();n=0}else N=null};if(N){let g=Date.now();let F=g-O;n+=F;O=g;m.get(N).push([_1J(),`frame ${w}`,`[${F}ms]`,`[${n}ms]:`,k,...h])};return l.apply(q,h)};let G=M;let N;let O;let n;let b;let w=0;b=enterFrame(s);let P={canvas:x.canvas,snapshots:m,toString:D};PWGLDebugger.instances.push(P);console.log("PWGL Debugger",P);return new Proxy(x,{get(q,k){let l=q[k];return typeof l==="function"?G(l,q,k):l}})};let init=()=>{let I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(...h){let x=I.call(this,...h);return h[0].startsWith("webgl")?_1r(x):x}};window.PWGLDebugger={version:"0.0.1",SHOW_CALL_STACK,SHOW_READABLE_NAMES,SHOW_ARRAYS,init,instances:[]};console.log(`%cPWGL Debugger v${PWGLDebugger.version}\nhttps:\/\/github.com/asjs-dev/pwgl`,"background:#222;color:#0F0");})();